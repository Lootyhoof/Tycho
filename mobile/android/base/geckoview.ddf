# This is a Classycle dependency definition file that asserts that the contents
# of the GoannaView library (Classycle set [lib]) is a dependency (but does not
# depend) on Fennec (Classycle set [main]).  The additional Classycle set
# [middle] consists of classes referenced by GoannaView that probably should not
# be referenced.  We want this middle set to shrink over time.

show allResults

[lib] = \
  org.mozilla.gecko.gfx.* \
  org.mozilla.gecko.mozglue.* \
  org.mozilla.gecko.sqlite.* \
  org.mozilla.gecko.util.* \
  org.mozilla.gecko.AndroidGamepadManager \
  org.mozilla.gecko.AppConstants \
  org.mozilla.gecko.BaseGoannaInterface \
  org.mozilla.gecko.ContextGetter \
  org.mozilla.gecko.CrashHandler \
  org.mozilla.gecko.EventDispatcher \
  org.mozilla.gecko.GoannaAccessibility \
  org.mozilla.gecko.GoannaAppShell \
  org.mozilla.gecko.GoannaBatteryManager \
  org.mozilla.gecko.GoannaEditable \
  org.mozilla.gecko.GoannaEditableClient \
  org.mozilla.gecko.GoannaEditableListener \
  org.mozilla.gecko.GoannaEvent \
  org.mozilla.gecko.GoannaInputConnection \
  org.mozilla.gecko.GoannaJavaSampler \
  org.mozilla.gecko.GoannaNetworkManager \
  org.mozilla.gecko.GoannaProfile \
  org.mozilla.gecko.GoannaScreenOrientation \
  org.mozilla.gecko.GoannaSharedPrefs \
  org.mozilla.gecko.GoannaThread \
  org.mozilla.gecko.GoannaView \
  org.mozilla.gecko.GlobalHistory \
  org.mozilla.gecko.InputMethods \
  org.mozilla.gecko.NSSBridge \
  org.mozilla.gecko.NotificationClient \
  org.mozilla.gecko.NotificationHandler \
  org.mozilla.gecko.PrefsHelper \
  org.mozilla.gecko.SmsManager \
  org.mozilla.gecko.SurfaceBits \
  org.mozilla.gecko.SysInfo \
  org.mozilla.gecko.TouchEventInterceptor \
  org.mozilla.gecko.ZoomConstraints

[middle] = \
  org.mozilla.gecko.prompts.* \
  org.mozilla.gecko.AlertNotification \
  org.mozilla.gecko.FormAssistPopup \
  org.mozilla.gecko.GoannaActivity \
  org.mozilla.gecko.GoannaApp \
  org.mozilla.gecko.GoannaProfileDirectories \
  org.mozilla.gecko.GuestSession \
  org.mozilla.gecko.R \
  org.mozilla.gecko.Tab \
  org.mozilla.gecko.Tabs \
  org.mozilla.gecko.Telemetry \
  org.mozilla.gecko.TelemetryContract \
  org.mozilla.gecko.ThumbnailHelper \
  org.mozilla.gecko.db.BrowserDB \
  org.mozilla.gecko.db.LocalBrowserDB \
  org.mozilla.gecko.distribution.Distribution \
  org.mozilla.gecko.favicons.Favicons \
  org.mozilla.gecko.favicons.OnFaviconLoadedListener

[main] = org.mozilla.gecko.* excluding [lib] [middle]

check sets [lib] [middle] [main]

# Bug 1107134: it appears that Classycle can be fooled if the Java
# compiler inlines a constant from [main] into [lib].  That is, [main]
# really does depend on [lib] but Classycle only sees the dependency
# with some javac versions.  For now, disable the check.  Yes, this
# processing is useless without this check.
# check [lib] directlyIndependentOf [main]

# This fails; if this passed, GoannaView would be ready to extract from Fennec.
# check [lib] independentOf [middle]
